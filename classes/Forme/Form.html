<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
  <head>
    <title>Forme::Form</title>
    <meta content='text/html; charset=US-ASCII' http-equiv='Content-Type'>
    <link href='../../css/style.css' media='screen' rel='stylesheet' type='text/css'>
    <script type='text/javascript'>
      //<![CDATA[
        function popupCode(url) {
          window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
        }
        
        function toggleCode(id) {
          var code = document.getElementById(id)
        
          code.style.display = code.style.display != 'block' ? 'block' : 'none'
          return true
        }
        
        // Make codeblocks hidden by default
        document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
      //]]>
    </script>
  </head>
  <body class='page'>
    <div class='class' id='wrapper'>
      <div class='header'>
        <h1 class='name'>
          <span class='type'>class</span>
          Forme::Form
        </h1>
        <ol class='paths'>
          <li>
            <a target="docwin" href="../../files/lib/forme_rb.html">lib/forme.rb</a>
          </li>
        </ol>
        <div class='parent'>
          Parent:
          <strong><a target="docwin" href="../Forme.html">Forme</a></strong>
        </div>
      </div>
      <div id='content'>
        <div id='text'>
          <div id='description'>
            
            <p>The <code>Form</code> class is the main entry point to the library.</p>
            
            <p>Using the <code>form</code>, <code>input</code>, <code>tag</code>, and
            <code>inputs</code> methods, one can easily build  an abstract syntax tree
            of <code>Tag</code> and <code>Input</code> instances, which can be
            serialized to a string using <code>to_s</code>.</p>
          </div>
          <div id='method-list'>
            <h2>Methods</h2>
            <h3>Public Class</h3>
            <ol>
              <li><a target="docwin" href="#method-c-form">form</a></li>
              <li><a target="docwin" href="#method-c-new">new</a></li>
            </ol>
            <h3>Public Instance</h3>
            <ol>
              <li><a target="docwin" href="#method-i-3C-3C"><<</a></li>
              <li><a target="docwin" href="#method-i-_input">_input</a></li>
              <li><a target="docwin" href="#method-i-_inputs">_inputs</a></li>
              <li><a target="docwin" href="#method-i-_tag">_tag</a></li>
              <li><a target="docwin" href="#method-i-button">button</a></li>
              <li><a target="docwin" href="#method-i-close">close</a></li>
              <li><a target="docwin" href="#method-i-emit">emit</a></li>
              <li><a target="docwin" href="#attribute-i-error_handler">error_handler</a></li>
              <li><a target="docwin" href="#method-i-form">form</a></li>
              <li><a target="docwin" href="#method-i-format">format</a></li>
              <li><a target="docwin" href="#attribute-i-formatter">formatter</a></li>
              <li><a target="docwin" href="#attribute-i-hidden_tags">hidden_tags</a></li>
              <li><a target="docwin" href="#method-i-input">input</a></li>
              <li><a target="docwin" href="#attribute-i-input_defaults">input_defaults</a></li>
              <li><a target="docwin" href="#method-i-inputs">inputs</a></li>
              <li><a target="docwin" href="#attribute-i-inputs_wrapper">inputs_wrapper</a></li>
              <li><a target="docwin" href="#attribute-i-labeler">labeler</a></li>
              <li><a target="docwin" href="#attribute-i-obj">obj</a></li>
              <li><a target="docwin" href="#method-i-open">open</a></li>
              <li><a target="docwin" href="#attribute-i-opts">opts</a></li>
              <li><a target="docwin" href="#method-i-serialize">serialize</a></li>
              <li><a target="docwin" href="#attribute-i-serializer">serializer</a></li>
              <li><a target="docwin" href="#method-i-tag">tag</a></li>
              <li><a target="docwin" href="#method-i-tag_">tag_</a></li>
              <li><a target="docwin" href="#method-i-transform">transform</a></li>
              <li><a target="docwin" href="#method-i-transformer">transformer</a></li>
              <li><a target="docwin" href="#attribute-i-wrapper">wrapper</a></li>
            </ol>
          </div>
          <div id='context'>
          </div>
          <div id='section'>
            <div id='attribute-list'>
              <h2 class='section-bar'>Attributes</h2>
              <div class='name-list'>
                <table>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>
                      <a name='attribute-i-error_handler'>error_handler</a>
                    </td>
                    <td class='context-item-value'>[R]</td>
                    <td class='context-item-desc'>
                      
                      <p>The <code>error_handler</code> determines how to to mark tags as containing
                      errors. Must respond to <code>call</code> or be a registered symbol.</p>
                    </td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>
                      <a name='attribute-i-formatter'>formatter</a>
                    </td>
                    <td class='context-item-value'>[R]</td>
                    <td class='context-item-desc'>
                      
                      <p>The <code>formatter</code> determines how the +Input+s created are
                      transformed into <code>Tag</code> objects. Must respond to
                      <code>call</code> or be a registered symbol.</p>
                    </td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>
                      <a name='attribute-i-hidden_tags'>hidden_tags</a>
                    </td>
                    <td class='context-item-value'>[R]</td>
                    <td class='context-item-desc'>
                      
                      <p>The hidden tags to automatically add to the form.  If set, this should be
                      an array, where elements are one of the following types:</p>
                      <dl class="rdoc-list note-list"><dt>String, Array, <a href="Tag.html">Forme::Tag</a> 
                      <dd>
                      <p>Added directly as a child of the form tag.</p>
                      </dd><dt>Hash 
                      <dd>
                      <p>Adds a hidden tag for each entry, with keys as the name of the hidden tag
                      and values as the value of the hidden tag.</p>
                      </dd><dt>Proc 
                      <dd>
                      <p>Will be called with the form tag object, and should return an instance of
                      one of the handled types (or nil to not add a tag).</p>
                      </dd></dl>
                    </td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>
                      <a name='attribute-i-input_defaults'>input_defaults</a>
                    </td>
                    <td class='context-item-value'>[R]</td>
                    <td class='context-item-desc'>
                      
                      <p>Set the default options for inputs by type.  This should be a hash with
                      input type string keys and values that are hashes of input options.</p>
                    </td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>
                      <a name='attribute-i-inputs_wrapper'>inputs_wrapper</a>
                    </td>
                    <td class='context-item-value'>[R]</td>
                    <td class='context-item-desc'>
                      
                      <p>The <code>inputs_wrapper</code> determines how calls to <code>inputs</code>
                      are wrapped.  Must respond to <code>call</code> or be a registered symbol.</p>
                    </td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>
                      <a name='attribute-i-labeler'>labeler</a>
                    </td>
                    <td class='context-item-value'>[R]</td>
                    <td class='context-item-desc'>
                      
                      <p>The <code>labeler</code> determines how to label tags.  Must respond to
                      <code>call</code> or be a registered symbol.</p>
                    </td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>
                      <a name='attribute-i-obj'>obj</a>
                    </td>
                    <td class='context-item-value'>[R]</td>
                    <td class='context-item-desc'>
                      
                      <p>The object related to the receiver, if any.  If the <code>Form</code> has
                      an associated obj, then calls to <code>input</code> are assumed to be
                      accessing fields of the object instead to directly representing input
                      types.</p>
                    </td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>
                      <a name='attribute-i-opts'>opts</a>
                    </td>
                    <td class='context-item-value'>[R]</td>
                    <td class='context-item-desc'>
                      
                      <p>A hash of options for the receiver. Currently, the following are recognized
                      by default:</p>
                      <dl class="rdoc-list note-list"><dt>:obj 
                      <dd>
                      <p>Sets the <code>obj</code> attribute</p>
                      </dd><dt>:<a href="Form.html#attribute-i-error_handler">#error_handler</a> 
                      <dd>
                      <p>Sets the <code>error_handler</code> for the form</p>
                      </dd><dt>:formatter 
                      <dd>
                      <p>Sets the <code>formatter</code> for the form</p>
                      </dd><dt>:<a href="Form.html#attribute-i-hidden_tags">#hidden_tags</a> 
                      <dd>
                      <p>Sets the hidden tags to automatically add to this form.</p>
                      </dd><dt>:<a href="Form.html#attribute-i-input_defaults">#input_defaults</a> 
                      <dd>
                      <p>Sets the default options for each input type</p>
                      </dd><dt>:<a href="Form.html#attribute-i-inputs_wrapper">#inputs_wrapper</a> 
                      <dd>
                      <p>Sets the <code>inputs_wrapper</code> for the form</p>
                      </dd><dt>:labeler 
                      <dd>
                      <p>Sets the <code>labeler</code> for the form</p>
                      </dd><dt>:wrapper 
                      <dd>
                      <p>Sets the <code>wrapper</code> for the form</p>
                      </dd><dt>:serializer 
                      <dd>
                      <p>Sets the <code>serializer</code> for the form</p>
                      </dd></dl>
                    </td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>
                      <a name='attribute-i-serializer'>serializer</a>
                    </td>
                    <td class='context-item-value'>[R]</td>
                    <td class='context-item-desc'>
                      
                      <p>The <code>serializer</code> determines how <code>Tag</code> objects are
                      transformed into strings. Must respond to <code>call</code> or be a
                      registered symbol.</p>
                    </td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>
                      <a name='attribute-i-wrapper'>wrapper</a>
                    </td>
                    <td class='context-item-value'>[R]</td>
                    <td class='context-item-desc'>
                      
                      <p>The <code>wrapper</code> determines how (potentially labeled) tags are
                      wrapped.  Must respond to <code>call</code> or be a registered symbol.</p>
                    </td>
                  </tr>
                </table>
              </div>
            </div>
            <div id='methods'>
              <h2>Public Class methods</h2>
              <div class='method public-class' id='method-method-c-form'>
                <a name='method-c-form'></a>
                <div class='synopsis'>
                  <span class='name'>form</span>
                  <span class='arguments'>(obj=nil, attr={}, opts={}, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>Create a <code>Form</code> instance and yield it to the block, injecting
                  the opening form tag before yielding and the closing form tag after
                  yielding.</p>
                  
                  <p>Argument Handling:</p>
                  <dl class="rdoc-list note-list"><dt>No args 
                  <dd>
                  <p>Creates a <code>Form</code> object with no options and not associated to an
                  <code>obj</code>, and with no attributes in the opening tag.</p>
                  </dd><dt>1 hash arg 
                  <dd>
                  <p>Treated as opening form tag attributes, creating a <code>Form</code> object
                  with no options.</p>
                  </dd><dt>1 non-hash arg 
                  <dd>
                  <p>Treated as the <code>Form</code>&#39;s <code>obj</code>, with empty options
                  and no attributes in the opening tag.</p>
                  </dd><dt>2 hash args 
                  <dd>
                  <p>First hash is opening attributes, second hash is <code>Form</code> options.</p>
                  </dd><dt>1 non-hash arg, 1-2 hash args 
                  <dd>
                  <p>First argument is <code>Form</code>&#39;s obj, second is opening
                  attributes, third if provided is <code>Form</code>&#39;s options.</p>
                  </dd></dl>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-c-form-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-c-form-source'><span class="ruby-comment"># File lib/forme.rb, line 210</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">form</span>(<span class="ruby-identifier">obj</span>=<span class="ruby-keyword">nil</span>, <span class="ruby-identifier">attr</span>={}, <span class="ruby-identifier">opts</span>={}, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">f</span> = <span class="ruby-keyword">if</span> <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>)&#x000A;    <span class="ruby-identifier">raise</span> <span class="ruby-constant">Error</span>, <span class="ruby-string">&quot;Can&#39;t provide 3 hash arguments to form&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">empty?</span>&#x000A;    <span class="ruby-identifier">opts</span> = <span class="ruby-identifier">attr</span>&#x000A;    <span class="ruby-identifier">attr</span> = <span class="ruby-identifier">obj</span>&#x000A;    <span class="ruby-identifier">new</span>(<span class="ruby-identifier">opts</span>)&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-identifier">new</span>(<span class="ruby-identifier">obj</span>, <span class="ruby-identifier">opts</span>)&#x000A;  <span class="ruby-keyword">end</span>&#x000A;&#x000A;  <span class="ruby-identifier">ins</span> = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:inputs</span>]&#x000A;  <span class="ruby-identifier">button</span> = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:button</span>]&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">ins</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">button</span>&#x000A;    <span class="ruby-identifier">block</span> = <span class="ruby-constant">Proc</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">form</span><span class="ruby-operator">|</span>&#x000A;      <span class="ruby-identifier">form</span>.<span class="ruby-identifier">_inputs</span>(<span class="ruby-identifier">ins</span>, <span class="ruby-identifier">opts</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">ins</span>&#x000A;      <span class="ruby-keyword">yield</span> <span class="ruby-identifier">form</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span>&#x000A;      <span class="ruby-identifier">form</span>.<span class="ruby-identifier">emit</span>(<span class="ruby-identifier">form</span>.<span class="ruby-identifier">button</span>(<span class="ruby-identifier">button</span>)) <span class="ruby-keyword">if</span> <span class="ruby-identifier">button</span>&#x000A;    <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;&#x000A;  <span class="ruby-identifier">f</span>.<span class="ruby-identifier">form</span>(<span class="ruby-identifier">attr</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-class' id='method-method-c-new'>
                <a name='method-c-new'></a>
                <div class='synopsis'>
                  <span class='name'>new</span>
                  <span class='arguments'>(obj=nil, opts={})</span>
                </div>
                <div class='description'>
                  
                  <p>Creates a <code>Form</code> object. Arguments:</p>
                  <dl class="rdoc-list note-list"><dt>obj 
                  <dd>
                  <p>Sets the obj for the form.  If a hash, is merged with the <code>opts</code>
                  argument to set the opts.</p>
                  </dd><dt>opts 
                  <dd>
                  <p>A hash of options for the form, see <code>opts</code> attribute for details
                  on available options.</p>
                  </dd></dl>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-c-new-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-c-new-source'><span class="ruby-comment"># File lib/forme.rb, line 238</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">obj</span>=<span class="ruby-keyword">nil</span>, <span class="ruby-identifier">opts</span>={})&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>)&#x000A;    <span class="ruby-ivar">@opts</span> = <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">opts</span>)&#x000A;    <span class="ruby-ivar">@obj</span> = <span class="ruby-ivar">@opts</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:obj</span>)&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-ivar">@obj</span> = <span class="ruby-identifier">obj</span>&#x000A;    <span class="ruby-ivar">@opts</span> = <span class="ruby-identifier">opts</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@obj</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@obj</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:forme_config</span>)&#x000A;    <span class="ruby-ivar">@obj</span>.<span class="ruby-identifier">forme_config</span>(<span class="ruby-keyword">self</span>)&#x000A;  <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-identifier">config</span> = <span class="ruby-constant">CONFIGURATIONS</span>[<span class="ruby-ivar">@opts</span>[<span class="ruby-value">:config</span>]<span class="ruby-operator">||</span><span class="ruby-constant">Forme</span>.<span class="ruby-identifier">default_config</span>]&#x000A;  <span class="ruby-constant">TRANSFORMER_TYPES</span>.<span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">k</span><span class="ruby-operator">|</span> <span class="ruby-identifier">instance_variable_set</span>(<span class="ruby-value">:&quot;@#{k}&quot;</span>, <span class="ruby-identifier">transformer</span>(<span class="ruby-identifier">k</span>, <span class="ruby-ivar">@opts</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-identifier">k</span>, <span class="ruby-identifier">config</span>[<span class="ruby-identifier">k</span>])))}&#x000A;  <span class="ruby-ivar">@input_defaults</span> = <span class="ruby-ivar">@opts</span>[<span class="ruby-value">:input_defaults</span>] <span class="ruby-operator">||</span> {}&#x000A;  <span class="ruby-ivar">@hidden_tags</span> = <span class="ruby-ivar">@opts</span>[<span class="ruby-value">:hidden_tags</span>]&#x000A;  <span class="ruby-ivar">@nesting</span> = []&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <h2>Public Instance methods</h2>
              <div class='method public-instance' id='method-method-i-3C-3C'>
                <a name='method-i-3C-3C'></a>
                <div class='synopsis'>
                  <span class='name'><<</span>
                  <span class='arguments'>(tag)</span>
                </div>
                <div class='description'>
                  
                  <p>Add the <code>Input</code>/<code>Tag</code> instance given to the currently
                  open tag.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-3C-3C-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-3C-3C-source'><span class="ruby-comment"># File lib/forme.rb, line 437</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-operator">&lt;&lt;</span>(<span class="ruby-identifier">tag</span>)&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">n</span> = <span class="ruby-ivar">@nesting</span>.<span class="ruby-identifier">last</span>&#x000A;    <span class="ruby-identifier">n</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">tag</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-_input'>
                <a name='method-i-_input'></a>
                <div class='synopsis'>
                  <span class='name'>_input</span>
                  <span class='arguments'>(*a)</span>
                </div>
                <div class='description'>
                  
                  <p>Create a new <code>Input</code> associated with the receiver with the given
                  arguments, doing no other processing.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-_input-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-_input-source'><span class="ruby-comment"># File lib/forme.rb, line 360</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">_input</span>(*<span class="ruby-identifier">a</span>)&#x000A;  <span class="ruby-constant">Input</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword">self</span>, *<span class="ruby-identifier">a</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-_inputs'>
                <a name='method-i-_inputs'></a>
                <div class='synopsis'>
                  <span class='name'>_inputs</span>
                  <span class='arguments'>(inputs=[], opts={})</span>
                </div>
                <div class='description'>
                  
                  <p>Internals of <a href="Form.html#method-i-inputs">inputs</a>, should be used
                  internally by the library, where <a
                  href="Form.html#method-i-inputs">inputs</a> is designed for external use.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-_inputs-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-_inputs-source'><span class="ruby-comment"># File lib/forme.rb, line 381</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">_inputs</span>(<span class="ruby-identifier">inputs</span>=[], <span class="ruby-identifier">opts</span>={})&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">inputs</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>)&#x000A;    <span class="ruby-identifier">opts</span> = <span class="ruby-identifier">inputs</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">opts</span>)&#x000A;    <span class="ruby-identifier">inputs</span> = []&#x000A;  <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-identifier">transform</span>(<span class="ruby-value">:inputs_wrapper</span>, <span class="ruby-identifier">opts</span>, <span class="ruby-keyword">self</span>, <span class="ruby-identifier">opts</span>) <span class="ruby-keyword">do</span>&#x000A;    <span class="ruby-identifier">inputs</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>&#x000A;      <span class="ruby-identifier">emit</span>(<span class="ruby-identifier">input</span>(*<span class="ruby-identifier">i</span>))&#x000A;    <span class="ruby-keyword">end</span>&#x000A;    <span class="ruby-keyword">yield</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-_tag'>
                <a name='method-i-_tag'></a>
                <div class='synopsis'>
                  <span class='name'>_tag</span>
                  <span class='arguments'>(*a, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>Create a <code>Tag</code> associated to the receiver with the given
                  arguments and block, doing no other processing.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-_tag-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-_tag-source'><span class="ruby-comment"># File lib/forme.rb, line 408</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">_tag</span>(*<span class="ruby-identifier">a</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">tag</span> = <span class="ruby-constant">Tag</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword">self</span>, *<span class="ruby-identifier">a</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-button'>
                <a name='method-i-button'></a>
                <div class='synopsis'>
                  <span class='name'>button</span>
                  <span class='arguments'>(opts={})</span>
                </div>
                <div class='description'>
                  
                  <p>Creates a :submit <code>Input</code> with the given opts, adding it to the
                  list of children for the currently open tag.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-button-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-button-source'><span class="ruby-comment"># File lib/forme.rb, line 429</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">button</span>(<span class="ruby-identifier">opts</span>={})&#x000A;  <span class="ruby-identifier">opts</span> = {<span class="ruby-value">:value=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">opts</span>} <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">String</span>)&#x000A;  <span class="ruby-identifier">input</span> = <span class="ruby-identifier">_input</span>(<span class="ruby-value">:submit</span>, <span class="ruby-identifier">opts</span>)&#x000A;  <span class="ruby-keyword">self</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">input</span>&#x000A;  <span class="ruby-identifier">input</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-close'>
                <a name='method-i-close'></a>
                <div class='synopsis'>
                  <span class='name'>close</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Returns a string representing the closing of the form tag, for serializers
                  that support closing tags.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-close-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-close-source'><span class="ruby-comment"># File lib/forme.rb, line 402</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">close</span>&#x000A;  <span class="ruby-identifier">serializer</span>.<span class="ruby-identifier">serialize_close</span>(<span class="ruby-identifier">_tag</span>(<span class="ruby-value">:form</span>)) <span class="ruby-keyword">if</span> <span class="ruby-identifier">serializer</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:serialize_close</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-emit'>
                <a name='method-i-emit'></a>
                <div class='synopsis'>
                  <span class='name'>emit</span>
                  <span class='arguments'>(tag)</span>
                </div>
                <div class='description'>
                  
                  <p>Empty method designed to ease integration with other libraries where <a
                  href="../Forme.html">Forme</a> is used in template code and some output
                  implicitly created by <a href="../Forme.html">Forme</a> needs to be
                  injected into the template output.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-emit-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-emit-source'><span class="ruby-comment"># File lib/forme.rb, line 317</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">emit</span>(<span class="ruby-identifier">tag</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-form'>
                <a name='method-i-form'></a>
                <div class='synopsis'>
                  <span class='name'>form</span>
                  <span class='arguments'>(attr={}, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>Create a form tag with the given attributes.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-form-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-form-source'><span class="ruby-comment"># File lib/forme.rb, line 305</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">form</span>(<span class="ruby-identifier">attr</span>={}, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">tag</span>(<span class="ruby-value">:form</span>, <span class="ruby-identifier">attr</span>, <span class="ruby-identifier">method</span>(<span class="ruby-value">:hidden_form_tags</span>), &amp;<span class="ruby-identifier">block</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-format'>
                <a name='method-i-format'></a>
                <div class='synopsis'>
                  <span class='name'>format</span>
                  <span class='arguments'>(input)</span>
                </div>
                <div class='description'>
                  
                  <p>Formats the <code>input</code> using the <code>formatter</code>.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-format-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-format-source'><span class="ruby-comment"># File lib/forme.rb, line 310</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">format</span>(<span class="ruby-identifier">input</span>)&#x000A;  <span class="ruby-identifier">transform</span>(<span class="ruby-value">:formatter</span>, <span class="ruby-identifier">input</span>.<span class="ruby-identifier">opts</span>, <span class="ruby-identifier">input</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-input'>
                <a name='method-i-input'></a>
                <div class='synopsis'>
                  <span class='name'>input</span>
                  <span class='arguments'>(field, opts={})</span>
                </div>
                <div class='description'>
                  
                  <p>Creates an <code>Input</code> with the given <code>field</code> and
                  <code>opts</code> associated with the receiver, and add it to the list of
                  children to the currently open tag.</p>
                  
                  <p>If the form is associated with an <code>obj</code>, or the :obj key exists
                  in the <code>opts</code> argument, treats the <code>field</code> as a call
                  to the <code>obj</code>.  If <code>obj</code> responds to
                  <code>forme_input</code>, that method is called with the <code>field</code>
                  and a copy of <code>opts</code>.  Otherwise, the field is used as a method
                  call on the <code>obj</code> and a text input is created with the result.</p>
                  
                  <p>If no <code>obj</code> is associated with the receiver, <code>field</code>
                  represents an input type (e.g. <code>:text</code>, <code>:textarea</code>,
                  <code>:select</code>), and an input is created directly with the
                  <code>field</code> and <code>opts</code>.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-input-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-input-source'><span class="ruby-comment"># File lib/forme.rb, line 333</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">input</span>(<span class="ruby-identifier">field</span>, <span class="ruby-identifier">opts</span>={})&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-value">:obj</span>)&#x000A;    <span class="ruby-identifier">opts</span> = <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">dup</span>&#x000A;    <span class="ruby-identifier">obj</span> = <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:obj</span>)&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-identifier">obj</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">obj</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-identifier">input</span> = <span class="ruby-keyword">if</span> <span class="ruby-identifier">obj</span>&#x000A;    <span class="ruby-keyword">if</span> <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:forme_input</span>)&#x000A;      <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">forme_input</span>(<span class="ruby-keyword">self</span>, <span class="ruby-identifier">field</span>, <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">dup</span>)&#x000A;    <span class="ruby-keyword">else</span>&#x000A;      <span class="ruby-identifier">opts</span> = <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">dup</span>&#x000A;      <span class="ruby-identifier">opts</span>[<span class="ruby-value">:name</span>] = <span class="ruby-identifier">field</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-value">:name</span>)&#x000A;      <span class="ruby-identifier">opts</span>[<span class="ruby-value">:id</span>] = <span class="ruby-identifier">field</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-value">:id</span>)&#x000A;      <span class="ruby-identifier">opts</span>[<span class="ruby-value">:value</span>] = <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">field</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-value">:value</span>)&#x000A;      <span class="ruby-identifier">_input</span>(<span class="ruby-value">:text</span>, <span class="ruby-identifier">opts</span>)&#x000A;    <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-identifier">_input</span>(<span class="ruby-identifier">field</span>, <span class="ruby-identifier">opts</span>)&#x000A;  <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-identifier">use_serializer</span>(<span class="ruby-identifier">input</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">input</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>)&#x000A;  <span class="ruby-keyword">self</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">input</span>&#x000A;  <span class="ruby-identifier">input</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-inputs'>
                <a name='method-i-inputs'></a>
                <div class='synopsis'>
                  <span class='name'>inputs</span>
                  <span class='arguments'>(*a, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>Creates a tag using the <code>inputs_wrapper</code> (a fieldset by
                  default), calls input on each element of <code>inputs</code>, and yields to
                  if given a block. You can use array arguments if you want inputs to be
                  created with specific options:</p>
                  
                  <pre class="ruby"><span class="ruby-identifier">inputs</span>([:<span class="ruby-identifier">field1</span>, :<span class="ruby-identifier">field2</span>])&#x000A;<span class="ruby-identifier">inputs</span>([[:<span class="ruby-identifier">field1</span>, {:<span class="ruby-identifier">name=</span><span class="ruby-operator">&gt;</span><span class="ruby-string">&#39;foo&#39;</span>}], :<span class="ruby-identifier">field2</span>])</pre>
                  
                  <p>The given <code>opts</code> are passed to the <code>inputs_wrapper</code>,
                  and the default <code>inputs_wrapper</code> supports a <code>:legend</code>
                  option that is used to set the legend for the fieldset.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-inputs-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-inputs-source'><span class="ruby-comment"># File lib/forme.rb, line 375</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">inputs</span>(*<span class="ruby-identifier">a</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">_inputs</span>(*<span class="ruby-identifier">a</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-open'>
                <a name='method-i-open'></a>
                <div class='synopsis'>
                  <span class='name'>open</span>
                  <span class='arguments'>(attr)</span>
                </div>
                <div class='description'>
                  
                  <p>Returns a string representing the opening of the form tag for serializers
                  that support opening tags.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-open-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-open-source'><span class="ruby-comment"># File lib/forme.rb, line 396</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">open</span>(<span class="ruby-identifier">attr</span>)&#x000A;  <span class="ruby-identifier">serializer</span>.<span class="ruby-identifier">serialize_open</span>(<span class="ruby-identifier">_tag</span>(<span class="ruby-value">:form</span>, <span class="ruby-identifier">attr</span>)) <span class="ruby-keyword">if</span> <span class="ruby-identifier">serializer</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:serialize_open</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-serialize'>
                <a name='method-i-serialize'></a>
                <div class='synopsis'>
                  <span class='name'>serialize</span>
                  <span class='arguments'>(tag)</span>
                </div>
                <div class='description'>
                  
                  <p>Serializes the <code>tag</code> using the <code>serializer</code>.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-serialize-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-serialize-source'><span class="ruby-comment"># File lib/forme.rb, line 444</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">serialize</span>(<span class="ruby-identifier">tag</span>)&#x000A;  <span class="ruby-identifier">serializer</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">tag</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-tag'>
                <a name='method-i-tag'></a>
                <div class='synopsis'>
                  <span class='name'>tag</span>
                  <span class='arguments'>(*a, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>Creates a <code>Tag</code> associated to the receiver with the given
                  arguments. Add the tag to the the list of children for the currently open
                  tag. If a block is given, make this tag the currently open tag while inside
                  the block.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-tag-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-tag-source'><span class="ruby-comment"># File lib/forme.rb, line 416</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">tag</span>(*<span class="ruby-identifier">a</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">tag</span> = <span class="ruby-identifier">_tag</span>(*<span class="ruby-identifier">a</span>)&#x000A;  <span class="ruby-keyword">self</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">tag</span>&#x000A;  <span class="ruby-identifier">nest</span>(<span class="ruby-identifier">tag</span>, &amp;<span class="ruby-identifier">block</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">block</span>&#x000A;  <span class="ruby-identifier">tag</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-tag_'>
                <a name='method-i-tag_'></a>
                <div class='synopsis'>
                  <span class='name'>tag_</span>
                  <span class='arguments'>(*a, &block)</span>
                </div>
                <div class='description'>
                  
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-tag_-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-tag_-source'><span class="ruby-comment"># File lib/forme.rb, line 423</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">tag_</span>(*<span class="ruby-identifier">a</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">tag</span>(*<span class="ruby-identifier">a</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-transform'>
                <a name='method-i-transform'></a>
                <div class='synopsis'>
                  <span class='name'>transform</span>
                  <span class='arguments'>(type, trans_name, *args, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>If there is a related transformer, call it with the given <code>args</code>
                  and <code>block</code>. Otherwise, attempt to return the initial input
                  without modifying it.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-transform-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-transform-source'><span class="ruby-comment"># File lib/forme.rb, line 258</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">transform</span>(<span class="ruby-identifier">type</span>, <span class="ruby-identifier">trans_name</span>, *<span class="ruby-identifier">args</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">trans</span> = <span class="ruby-identifier">transformer</span>(<span class="ruby-identifier">type</span>, <span class="ruby-identifier">trans_name</span>)&#x000A;    <span class="ruby-identifier">trans</span>.<span class="ruby-identifier">call</span>(*<span class="ruby-identifier">args</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-keyword">case</span> <span class="ruby-identifier">type</span>&#x000A;    <span class="ruby-keyword">when</span> <span class="ruby-value">:inputs_wrapper</span>&#x000A;      <span class="ruby-keyword">yield</span>&#x000A;    <span class="ruby-keyword">when</span> <span class="ruby-value">:labeler</span>, <span class="ruby-value">:error_handler</span>, <span class="ruby-value">:wrapper</span>&#x000A;      <span class="ruby-identifier">args</span>.<span class="ruby-identifier">first</span>&#x000A;    <span class="ruby-keyword">else</span>&#x000A;      <span class="ruby-identifier">raise</span> <span class="ruby-constant">Error</span>, <span class="ruby-node">&quot;No matching #{type}: #{trans_name.inspect}&quot;</span>&#x000A;    <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-transformer'>
                <a name='method-i-transformer'></a>
                <div class='synopsis'>
                  <span class='name'>transformer</span>
                  <span class='arguments'>(type, trans)</span>
                </div>
                <div class='description'>
                  
                  <p>Get the related transformer for the given transformer type.  Output depends
                  on the type of <code>trans</code>:</p>
                  <dl class="rdoc-list note-list"><dt>Symbol 
                  <dd>
                  <p>Assume a request for a registered transformer, so look it up in the
                  <code>TRANSFORRMERS</code> hash.</p>
                  </dd><dt>Hash 
                  <dd>
                  <p>If <code>type</code> is also a key in <code>trans</code>, return the
                  related value from <code>trans</code>, unless the related value is
                  <code>nil</code>, in which case, return <code>nil</code>.  If
                  <code>type</code> is not a key in <code>trans</code>, use the default
                  transformer for the receiver.</p>
                  </dd><dt>nil 
                  <dd>
                  <p>Assume the default transformer for this receiver.</p>
                  </dd><dt>otherwise 
                  <dd>
                  <p>return <code>trans</code> directly if it responds to <code>call</code>, and
                  raise an <code>Error</code> if not.</p>
                  </dd></dl>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-transformer-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-transformer-source'><span class="ruby-comment"># File lib/forme.rb, line 281</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">transformer</span>(<span class="ruby-identifier">type</span>, <span class="ruby-identifier">trans</span>)&#x000A;  <span class="ruby-keyword">case</span> <span class="ruby-identifier">trans</span>&#x000A;  <span class="ruby-keyword">when</span> <span class="ruby-constant">Symbol</span>&#x000A;    <span class="ruby-constant">TRANSFORMERS</span>[<span class="ruby-identifier">type</span>][<span class="ruby-identifier">trans</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">raise</span>(<span class="ruby-constant">Error</span>, <span class="ruby-node">&quot;invalid #{type}: #{trans.inspect} (valid #{type}s: #{TRANSFORMERS[type].keys.map{|k| k.inspect}.join(&#39;, &#39;)})&quot;</span>)&#x000A;  <span class="ruby-keyword">when</span> <span class="ruby-constant">Hash</span>&#x000A;    <span class="ruby-keyword">if</span> <span class="ruby-identifier">trans</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">type</span>)&#x000A;      <span class="ruby-keyword">if</span> <span class="ruby-identifier">v</span> = <span class="ruby-identifier">trans</span>[<span class="ruby-identifier">type</span>]&#x000A;        <span class="ruby-identifier">transformer</span>(<span class="ruby-identifier">type</span>, <span class="ruby-identifier">v</span>)&#x000A;      <span class="ruby-keyword">end</span>&#x000A;    <span class="ruby-keyword">else</span>&#x000A;      <span class="ruby-identifier">transformer</span>(<span class="ruby-identifier">type</span>, <span class="ruby-keyword">nil</span>)&#x000A;    <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-keyword">when</span> <span class="ruby-keyword">nil</span>&#x000A;    <span class="ruby-identifier">send</span>(<span class="ruby-identifier">type</span>)&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-keyword">if</span> <span class="ruby-identifier">trans</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:call</span>)&#x000A;      <span class="ruby-identifier">trans</span>&#x000A;    <span class="ruby-keyword">else</span>&#x000A;      <span class="ruby-identifier">raise</span> <span class="ruby-constant">Error</span>, <span class="ruby-node">&quot;#{type} #{trans.inspect} must respond to #call&quot;</span>&#x000A;    <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id='footer-push'></div>
    </div>
    <div id='footer'>
      <a target="docwin" href="http://github.com/mislav/hanna/tree/master"><strong>Hanna</strong> RDoc template</a>
    </div>
  </body>
</html>
