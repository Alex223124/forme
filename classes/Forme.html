<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
  <head>
    <title>Forme</title>
    <meta content='text/html; charset=US-ASCII' http-equiv='Content-Type'>
    <link href='../css/style.css' media='screen' rel='stylesheet' type='text/css'>
    <script type='text/javascript'>
      //<![CDATA[
        function popupCode(url) {
          window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
        }
        
        function toggleCode(id) {
          var code = document.getElementById(id)
        
          code.style.display = code.style.display != 'block' ? 'block' : 'none'
          return true
        }
        
        // Make codeblocks hidden by default
        document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
      //]]>
    </script>
  </head>
  <body class='page'>
    <div class='class' id='wrapper'>
      <div class='header'>
        <h1 class='name'>
          <span class='type'>module</span>
          Forme
        </h1>
        <ol class='paths'>
          <li>
            <a target="docwin" href="../files/lib/forme_rb.html">lib/forme.rb</a>
          </li>
          <li class='other'>
            <a target="docwin" href="../files/lib/forme/rails_rb.html">lib/forme/rails.rb</a>
          </li>
          <li class='other'>
            <a target="docwin" href="../files/lib/forme/sinatra_rb.html">lib/forme/sinatra.rb</a>
          </li>
          <li class='other'>
            <a target="docwin" href="../files/lib/forme/version_rb.html">lib/forme/version.rb</a>
          </li>
          <li>
            <a class='show' href='#' onclick='this.parentNode.parentNode.className += " expanded"; this.parentNode.removeChild(this); return false'>show all</a>
          </li>
        </ol>
        <div class='parent'>
          Parent:
          <strong><a target="docwin" href="../files/lib/forme/version_rb.html">version.rb</a></strong>
        </div>
      </div>
      <div id='content'>
        <div id='text'>
          <div id='description'>
            
            <p><a href="Forme.html">Forme</a> is designed to make creating HTML forms
            easier.  Flexibility and simplicity are primary objectives.  The basic
            usage involves creating a <code>Forme::Form</code> instance, and calling
            <code>input</code> and <code>tag</code> methods to return html strings for
            widgets, but it could also be used for serializing to other formats, or
            even as a DSL for a GUI application.</p>
            
            <p>In order to be flexible, <a href="Forme.html">Forme</a> stores tags in
            abstract form until output is requested.  There are two separate abstract
            <em>forms</em> that <a href="Forme.html">Forme</a> uses.  One is
            <code>Forme::Input</code>, and the other is <code>Forme::Tag</code>.
            <code>Forme::Input</code> is a high level abstract form, while
            <code>Forme::Tag</code> is a low level abstract form.</p>
            
            <p>The difference between <code>Forme::Input</code> and
            <code>Forme::Tag</code>  is that <code>Forme::Tag</code> directly
            represents the underlying html tag, containing a type, optional attributes,
            and children, while the <code>Forme::Input</code> is more abstract and
            attempts to be user friendly. For example, these both compile by default to
            the same select tag:</p>
            
            <pre class="ruby"><span class="ruby-identifier">f</span>.<span class="ruby-identifier">input</span>(:<span class="ruby-identifier">select</span>, :<span class="ruby-identifier">options=</span><span class="ruby-operator">&gt;</span>[[<span class="ruby-string">&#39;foo&#39;</span>, <span class="ruby-value">1</span>]])&#x000A;<span class="ruby-comment"># or</span>&#x000A;<span class="ruby-identifier">f</span>.<span class="ruby-identifier">tag</span>(:<span class="ruby-identifier">select</span>, {}, [<span class="ruby-identifier">f</span>.<span class="ruby-identifier">tag</span>(:<span class="ruby-identifier">option</span>, {:<span class="ruby-identifier">value=</span><span class="ruby-operator">&gt;</span><span class="ruby-value">1</span>}, [<span class="ruby-string">&#39;foo&#39;</span>])])</pre>
            
            <p>The processing of high level <code>Forme::Input</code>s into raw html data
            is broken down to the following steps (called transformers):</p>
            <ol><li>
            <p><code>Formatter</code>: converts a <code>Forme::Input</code> instance into
            a <code>Forme::Tag</code> instance (or array of them).</p>
            </li><li>
            <p><code>ErrorHandler</code>: If the <code>Forme::Input</code> instance has a
            error, takes the formatted tag and marks it as having the error.</p>
            </li><li>
            <p><code>Labeler</code>: If the <code>Forme::Input</code> instance has a
            label, takes the formatted output and labels it.</p>
            </li><li>
            <p><code>Wrapper</code>: Takes the output of the labeler (or formatter if no
            label), and wraps it in another tag (or just returns it directly).</p>
            </li><li>
            <p><code>Serializer</code>: converts a <code>Forme::Tag</code> instance into a
            string.</p>
            </li></ol>
            
            <p>Technically, only the <code>Serializer</code> is necessary.  The
            <code>input</code> and <code>tag</code> methods return <code>Input</code>
            and <code>Tag</code> objects.  These objects both have <code>to_s</code>
            defined to call the appropriate <code>Serializer</code> with themselves. 
            The <code>Serializer</code> calls the appropriate <code>Formatter</code> if
            it encounters an <code>Input</code> instance, and attempts to serialize the
            output of that (which is usually a <code>Tag</code> instance).  It is up to
            the <code>Formatter</code> to call the <code>Labeler</code> and/or
            <code>ErrorHandler</code> (if necessary) and the <code>Wrapper</code>.</p>
            
            <p>There is also an <code>InputsWrapper</code> transformer, that is called by
            <code>Forme::Form#inputs</code>.  It&#39;s used to wrap up a group of
            related options (in a fieldset by default).</p>
            
            <p>The <code>Forme::Form</code> object takes the 6 transformers as options
            (:formatter, :labeler, :error_handler, :wrapper, :inputs_wrapper, and
            :serializer), all of which should be objects responding to
            <code>call</code> (so you can use +Proc+s) or be symbols registered with
            the library using <code>Forme.register_transformer</code>:</p>
            
            <pre class="ruby"><span class="ruby-constant">Forme</span>.<span class="ruby-identifier">register_transformer</span>(:<span class="ruby-identifier">wrapper</span>, :<span class="ruby-identifier">p</span>){<span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span> <span class="ruby-identifier">t</span>.<span class="ruby-identifier">tag</span>(:<span class="ruby-identifier">p</span>, {}, <span class="ruby-identifier">t</span>)}</pre>
            
            <p>Most of the transformers can be overridden on a per instance basis by
            passing the appopriate option to <code>input</code> or <code>inputs</code>:</p>
            
            <pre class="ruby"><span class="ruby-identifier">f</span>.<span class="ruby-identifier">input</span>(:<span class="ruby-identifier">name</span>, :<span class="ruby-identifier">wrapper=</span><span class="ruby-operator">&gt;</span>:<span class="ruby-identifier">p</span>)</pre>
          </div>
          <div id='method-list'>
            <h2>Methods</h2>
            <h3>Public Class</h3>
            <ol>
              <li><a target="docwin" href="#method-c-attr_classes">attr_classes</a></li>
              <li><a target="docwin" href="#attribute-c-default_config">default_config</a></li>
              <li><a target="docwin" href="#method-c-form">form</a></li>
              <li><a target="docwin" href="#method-c-merge_classes">merge_classes</a></li>
              <li><a target="docwin" href="#method-c-register_config">register_config</a></li>
              <li><a target="docwin" href="#method-c-register_transformer">register_transformer</a></li>
              <li><a target="docwin" href="#method-c-version">version</a></li>
            </ol>
          </div>
          <div id='context'>
          </div>
          <div id='class-list'>
            <h2>Classes and Modules</h2>
            <ol>
              <li><a target="docwin" href="Forme/Rails.html">Forme::Rails</a></li>
              <li><a target="docwin" href="Forme/Raw.html">Forme::Raw</a></li>
              <li><a target="docwin" href="Forme/Serialized.html">Forme::Serialized</a></li>
              <li><a target="docwin" href="Forme/Sinatra.html">Forme::Sinatra</a></li>
              <li><a target="docwin" href="Forme/Error.html">Forme::Error</a></li>
              <li><a target="docwin" href="Forme/ErrorHandler.html">Forme::ErrorHandler</a></li>
              <li><a target="docwin" href="Forme/Form.html">Forme::Form</a></li>
              <li><a target="docwin" href="Forme/Formatter.html">Forme::Formatter</a></li>
              <li><a target="docwin" href="Forme/Input.html">Forme::Input</a></li>
              <li><a target="docwin" href="Forme/InputsWrapper.html">Forme::InputsWrapper</a></li>
              <li><a target="docwin" href="Forme/Labeler.html">Forme::Labeler</a></li>
              <li><a target="docwin" href="Forme/Serializer.html">Forme::Serializer</a></li>
              <li><a target="docwin" href="Forme/Tag.html">Forme::Tag</a></li>
            </ol>
          </div>
          <div id='section'>
            <div id='constants-list'>
              <h2>Constants</h2>
              <div class='name-list'>
                <table summary='Constants'>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>CONFIGURATIONS</td>
                    <td>=</td>
                    <td class='context-item-value'>{:default=>{}}</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'>
                      
                      <p>Hash storing all configurations.  Configurations are groups of related
                      transformers, so that you can specify a single :config option when creating
                      a <code>Form</code> and have all of the transformers set from that.</p>
                    </td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>TRANSFORMERS</td>
                    <td>=</td>
                    <td class='context-item-value'>{}</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'>
                      
                      <p>Main hash storing the registered transformers.  Maps transformer type
                      symbols to subhashes containing the registered transformers for that type. 
                      Those subhashes should have symbol keys and values that are either classes
                      or objects that respond to <code>call</code>.</p>
                    </td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>TRANSFORMER_TYPES</td>
                    <td>=</td>
                    <td class='context-item-value'>[:formatter, :serializer, :wrapper, :error_handler, :labeler, :inputs_wrapper]</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'>
                      
                      <p>Array of all supported transformer types.</p>
                    </td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>VERSION</td>
                    <td>=</td>
                    <td class='context-item-value'>'0.9.1'.freeze</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'>
                      
                      <p>Version constant, use <code>Forme.version</code> instead.</p>
                    </td>
                  </tr>
                </table>
              </div>
            </div>
            <div id='attribute-list'>
              <h2 class='section-bar'>Attributes</h2>
              <div class='name-list'>
                <table>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>
                      <a name='attribute-c-default_config'>default_config</a>
                    </td>
                    <td class='context-item-value'>[RW]</td>
                    <td class='context-item-desc'>
                      
                      <p>Set the default configuration to use if none is explicitly specified
                      (default: :default).</p>
                    </td>
                  </tr>
                </table>
              </div>
            </div>
            <div id='methods'>
              <h2>Public Class methods</h2>
              <div class='method public-class' id='method-method-c-attr_classes'>
                <a name='method-c-attr_classes'></a>
                <div class='synopsis'>
                  <span class='name'>attr_classes</span>
                  <span class='arguments'>(attr, *classes)</span>
                </div>
                <div class='description'>
                  
                  <p>Update the <code>:class</code> entry in the <code>attr</code> hash with the
                  given <code>classes</code>.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-c-attr_classes-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-c-attr_classes-source'><span class="ruby-comment"># File lib/forme.rb, line 125</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">attr_classes</span>(<span class="ruby-identifier">attr</span>, *<span class="ruby-identifier">classes</span>)&#x000A;  <span class="ruby-identifier">attr</span>[<span class="ruby-value">:class</span>] = <span class="ruby-identifier">merge_classes</span>(<span class="ruby-identifier">attr</span>[<span class="ruby-value">:class</span>], *<span class="ruby-identifier">classes</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-class' id='method-method-c-form'>
                <a name='method-c-form'></a>
                <div class='synopsis'>
                  <span class='name'>form</span>
                  <span class='arguments'>(*a, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>Call <code>Forme::Form.form</code> with the given arguments and block.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-c-form-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-c-form-source'><span class="ruby-comment"># File lib/forme.rb, line 120</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">form</span>(*<span class="ruby-identifier">a</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-constant">Form</span>.<span class="ruby-identifier">form</span>(*<span class="ruby-identifier">a</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-class' id='method-method-c-merge_classes'>
                <a name='method-c-merge_classes'></a>
                <div class='synopsis'>
                  <span class='name'>merge_classes</span>
                  <span class='arguments'>(*classes)</span>
                </div>
                <div class='description'>
                  
                  <p>Return a string that includes all given class strings</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-c-merge_classes-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-c-merge_classes-source'><span class="ruby-comment"># File lib/forme.rb, line 130</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">merge_classes</span>(*<span class="ruby-identifier">classes</span>)&#x000A;  <span class="ruby-identifier">classes</span>.<span class="ruby-identifier">compact</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&#39; &#39;</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-class' id='method-method-c-register_config'>
                <a name='method-c-register_config'></a>
                <div class='synopsis'>
                  <span class='name'>register_config</span>
                  <span class='arguments'>(type, hash)</span>
                </div>
                <div class='description'>
                  
                  <p>Register a new configuration.  Type is the configuration name symbol, and
                  hash maps transformer type symbols to transformer name symbols.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-c-register_config-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-c-register_config-source'><span class="ruby-comment"># File lib/forme.rb, line 113</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">register_config</span>(<span class="ruby-identifier">type</span>, <span class="ruby-identifier">hash</span>)&#x000A;  <span class="ruby-constant">CONFIGURATIONS</span>[<span class="ruby-identifier">type</span>] = <span class="ruby-constant">CONFIGURATIONS</span>[<span class="ruby-identifier">hash</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-value">:base</span>, <span class="ruby-value">:default</span>)].<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">hash</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-class' id='method-method-c-register_transformer'>
                <a name='method-c-register_transformer'></a>
                <div class='synopsis'>
                  <span class='name'>register_transformer</span>
                  <span class='arguments'>(type, sym, obj=nil, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>Register a new transformer with this library. Arguments:</p>
                  <dl class="rdoc-list note-list"><dt>type 
                  <dd>
                  <p>Transformer type symbol</p>
                  </dd><dt>sym 
                  <dd>
                  <p>Transformer name symbol</p>
                  </dd><dt>obj/block 
                  <dd>
                  <p>Transformer to associate with this symbol.  Should provide either
                  <code>obj</code> or <code>block</code>, but not both.  If <code>obj</code>
                  is given, should be either a <code>Class</code> instance or it should
                  respond to <code>call</code>.  If a <code>Class</code> instance is given,
                  instances of that class should respond to <code>call</code>, and a new
                  instance of that class should be used for each transformation.</p>
                  </dd></dl>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-c-register_transformer-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-c-register_transformer-source'><span class="ruby-comment"># File lib/forme.rb, line 105</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">register_transformer</span>(<span class="ruby-identifier">type</span>, <span class="ruby-identifier">sym</span>, <span class="ruby-identifier">obj</span>=<span class="ruby-keyword">nil</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">raise</span> <span class="ruby-constant">Error</span>, <span class="ruby-string">&quot;Not a valid transformer type&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-constant">TRANSFORMERS</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">type</span>)&#x000A;  <span class="ruby-identifier">raise</span> <span class="ruby-constant">Error</span>, <span class="ruby-string">&quot;Must provide either block or obj, not both&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">obj</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">block</span>&#x000A;  <span class="ruby-constant">TRANSFORMERS</span>[<span class="ruby-identifier">type</span>][<span class="ruby-identifier">sym</span>] = <span class="ruby-identifier">obj</span><span class="ruby-operator">||</span><span class="ruby-identifier">block</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-class' id='method-method-c-version'>
                <a name='method-c-version'></a>
                <div class='synopsis'>
                  <span class='name'>version</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Returns the version as a frozen string (e.g. &#39;0.1.0&#39;)</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-c-version-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-c-version-source'><span class="ruby-comment"># File lib/forme/version.rb, line 6</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">version</span>&#x000A;  <span class="ruby-constant">VERSION</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id='footer-push'></div>
    </div>
    <div id='footer'>
      <a target="docwin" href="http://github.com/mislav/hanna/tree/master"><strong>Hanna</strong> RDoc template</a>
    </div>
  </body>
</html>
